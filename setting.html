<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Heimdallr - 全局设置</title>
  <style>
    /* 主题与基础（与现有页面统一：深色渐变 + 紫色系） */
    :root{
      --bg-grad: linear-gradient(135deg,#0a0a0a 0%,#1a0033 50%,#0a0a0a 100%);
      --glass: rgba(10,10,10,.92);
      --border: rgba(138,43,226,.30);
      --accent: #8a2be2; --accent2:#4b0082;
      --muted:#b8a9d9; --text:#fff; --card: rgba(138,43,226,.10)
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Arial,system-ui;background:var(--bg-grad);color:var(--text);overflow-x:hidden}

    /* 统一 Header（与 user/首页 保持一致） */
    .header{position:fixed;top:0;left:0;right:0;z-index:1000;background:var(--glass);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);padding:1rem 2rem}
    .nav-container{max-width:1400px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
    .logo-section{display:flex;align-items:center;gap:1rem}
    .brand-name{font-size:1.6rem;font-weight:700;background:linear-gradient(45deg,#fff,var(--accent),#fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:titleGlow 3s ease-in-out infinite}
    .nav-menu{display:flex;gap:1.25rem;align-items:center}
    .nav-item{color:var(--muted);text-decoration:none;font-size:1rem;padding:.5rem 1rem;border-radius:25px;transition:.25s}
    .nav-item:hover,.nav-item.active{color:#fff;background:rgba(138,43,226,.25)}
    .auth-section{display:flex;gap:.75rem}
    .btn{padding:.6rem 1.2rem;border-radius:25px;border:2px solid var(--accent);background:transparent;color:var(--accent);cursor:pointer;transition:.25s}
    .btn:hover{background:var(--accent);color:#fff;box-shadow:0 0 18px rgba(138,43,226,.35)}
    .btn.primary{border:none;background:linear-gradient(45deg,var(--accent),var(--accent2));color:#fff}
    @keyframes titleGlow{0%,100%{filter:drop-shadow(0 0 0 rgba(138,43,226,0))}50%{filter:drop-shadow(0 0 8px rgba(138,43,226,.6))}}

    /* 布局 */
    .main{max-width:1200px;margin:110px auto 48px;display:grid;grid-template-columns:300px 1fr;gap:24px;padding:0 16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:18px;backdrop-filter:blur(10px)}
    .card-header{padding:18px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
    .card-title{font-size:1.05rem;font-weight:700}
    .card-body{padding:20px}
    .section-title{font-size:.95rem;color:var(--muted);margin:16px 0 8px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .row.single{grid-template-columns:1fr}

    /* 表单/控件 */
    .input,.select,.textarea{width:100%;padding:.9rem 1rem;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:#fff;outline:none;transition:.2s}
    .input:focus,.select:focus,.textarea:focus{border-color:rgba(138,43,226,.75);box-shadow:0 0 12px rgba(138,43,226,.35)}
    .textarea{min-height:96px;resize:vertical}
    .savebar{display:flex;gap:12px;justify-content:flex-end;margin-top:16px}

    /* 开关 */
    .switch{position:relative;width:48px;height:26px}
    .switch input{opacity:0;width:0;height:0}
    .slider{position:absolute;cursor:pointer;inset:0;background:rgba(255,255,255,.1);border:1px solid var(--border);transition:.2s;border-radius:999px}
    .slider:before{content:"";position:absolute;height:20px;width:20px;left:3px;top:2px;background:#fff;border-radius:50%;transition:.2s}
    input:checked + .slider{background:linear-gradient(45deg,#4CAF50,#45a049);border-color:#45a049}
    input:checked + .slider:before{transform:translateX(22px)}

    /* 侧边导航 */
    .side{position:sticky;top:110px;height:fit-content}
    .side .group{padding:10px}
    .side a{display:block;color:var(--muted);text-decoration:none;padding:10px 12px;border-radius:12px;border:1px solid transparent}
    .side a:hover,.side a.active{color:#fff;background:rgba(138,43,226,.15);border-color:var(--border)}

    /* 表格（绑定/集成/会话历史） */
    table{width:100%;border-collapse:collapse;color:#fff}
    th,td{padding:12px 10px;border-bottom:1px solid var(--border);text-align:left}
    th{color:var(--muted);font-weight:700}
    .table-actions{display:flex;gap:8px}
    .btn.link{border:none;background:transparent;color:var(--muted);padding:0}
    .btn.link:hover{color:#fff;text-decoration:underline}

    /* Danger Zone */
    .danger{border-color:rgba(244,67,54,.45);background:rgba(244,67,54,.08)}
    .danger .card-header{border-bottom-color:rgba(244,67,54,.35)}
    .btn.danger{border-color:#f44336;color:#ff8a80}
    .btn.danger:hover{background:#f44336;color:#fff;box-shadow:0 0 18px rgba(244,67,54,.35)}

    @media (max-width: 980px){.main{grid-template-columns:1fr}.row{grid-template-columns:1fr}.side{position:static}}
  </style>
</head>
<body>
  <!-- 统一导航：当前页高亮“用户中心”或新增“设置”，此处用“用户中心”以兼容现有导航结构 -->
  <header class="header">
    <div class="nav-container">
      <div class="logo-section"><div class="brand-name">HEIMDALLR</div></div>
      <nav class="nav-menu">
        <a class="nav-item" href="首页.html">首页</a>
        <a class="nav-item active" href="user.html">用户中心</a>
        <a class="nav-item" href="index.html">介绍页</a>
        <a class="nav-item" href="login.html">登录</a>
      </nav>
      <div class="auth-section">
        <a class="btn" href="login.html">登录</a>
        <button class="btn primary" onclick="location.href='login.html'">注册</button>
      </div>
    </div>
  </header>

  <main class="main">
    <!-- 侧栏索引 -->
    <aside class="card side">
      <div class="card-header"><div class="card-title">设置目录</div></div>
      <div class="card-body">
        <div class="group">
          <a href="#general" class="active">通用</a>
          <a href="#privacy">隐私</a>
          <a href="#notifications">通知</a>
          <a href="#security">安全</a>
          <a href="#accessibility">无障碍</a>
          <a href="#regional">地区与语言</a>
          <a href="#connections">外部账号/集成</a>
          <a href="#developer">开发者选项</a>
          <a href="#data">数据导出与删除</a>
          <a href="#sessions">会话与设备</a>
          <a href="#danger">危险操作</a>
        </div>
      </div>
    </aside>

    <!-- 右侧内容区：各设置模块 -->
    <section style="display:flex;flex-direction:column;gap:24px">
      <!-- 通用 -->
      <section id="general" class="card">
        <div class="card-header"><div class="card-title">通用</div><div class="section-title">基础偏好</div></div>
        <div class="card-body">
          <div class="row">
            <div>
              <label class="section-title">主题</label>
              <select id="theme" class="select">
                <option value="dark" selected>深色</option>
                <option value="light">浅色</option>
                <option value="auto">跟随系统</option>
              </select>
            </div>
            <div>
              <label class="section-title">首页显示</label>
              <select id="homeTab" class="select">
                <option value="dashboard" selected>用户中心</option>
                <option value="projects">任务大厅</option>
                <option value="custom">自定义</option>
              </select>
            </div>
          </div>
          <div class="row" style="margin-top:12px">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
              <div>
                <div class="section-title" style="margin:0 0 4px">实验功能</div>
                <div class="muted">启用后可提前体验新特性（可能不稳定）</div>
              </div>
              <label class="switch"><input id="labs" type="checkbox"><span class="slider"></span></label>
            </div>
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
              <div>
                <div class="section-title" style="margin:0 0 4px">压缩动画效果</div>
                <div class="muted">减少动效以提升低端设备流畅度</div>
              </div>
              <label class="switch"><input id="reducedMotion" type="checkbox"><span class="slider"></span></label>
            </div>
          </div>
          <div class="savebar"><button class="btn" onclick="resetGeneral()">重置</button><button class="btn primary" onclick="saveGeneral()">保存</button></div>
        </div>
      </section>

      <!-- 隐私 -->
      <section id="privacy" class="card">
        <div class="card-header"><div class="card-title">隐私</div><div class="section-title">可见性与数据控制</div></div>
        <div class="card-body">
          <div class="row single">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
              <div>
                <div class="section-title" style="margin:0 0 4px">档案公开度</div>
                <div class="muted">控制你的个人资料是否对非登录用户可见</div>
              </div>
              <label class="switch"><input id="profilePublic" type="checkbox"><span class="slider"></span></label>
            </div>
          </div>
          <div class="row" style="margin-top:12px">
            <div>
              <label class="section-title">在线状态</label>
              <select id="onlineStatus" class="select">
                <option value="show">显示在线</option>
                <option value="hide" selected>不显示在线状态</option>
              </select>
            </div>
            <div>
              <label class="section-title">搜索引擎索引</label>
              <select id="indexing" class="select">
                <option value="allow">允许</option>
                <option value="deny" selected>禁止</option>
              </select>
            </div>
          </div>
          <div class="savebar"><button class="btn" onclick="resetPrivacy()">重置</button><button class="btn primary" onclick="savePrivacy()">保存</button></div>
        </div>
      </section>

      <!-- 通知 -->
      <section id="notifications" class="card">
        <div class="card-header"><div class="card-title">通知</div><div class="section-title">渠道与频率</div></div>
        <div class="card-body">
          <div class="row">
            <div>
              <label class="section-title">渠道</label>
              <select id="nChannel" class="select">
                <option value="email">电子邮件</option>
                <option value="inapp" selected>站内</option>
                <option value="both">两者</option>
              </select>
            </div>
            <div>
              <label class="section-title">频率</label>
              <select id="nFreq" class="select">
                <option value="realtime" selected>实时</option>
                <option value="daily">每日</option>
                <option value="weekly">每周</option>
              </select>
            </div>
          </div>
          <div class="row single" style="margin-top:12px">
            <div>
              <label class="section-title">订阅主题</label>
              <div class="muted">任务进度、支付、系统公告（示例）</div>
            </div>
          </div>
          <div class="savebar"><button class="btn" onclick="resetNotify()">重置</button><button class="btn primary" onclick="saveNotify()">保存</button></div>
        </div>
      </section>

      <!-- 安全 -->
      <section id="security" class="card">
        <div class="card-header"><div class="card-title">安全</div><div class="section-title">登录与二步验证</div></div>
        <div class="card-body">
          <table>
            <thead><tr><th>方式</th><th>状态</th><th>最近使用</th><th>操作</th></tr></thead>
            <tbody>
              <tr><td>邮箱 + 密码</td><td>已启用</td><td>今天 10:12</td><td class="table-actions"><button class="btn link" onclick="changePwd()">修改密码</button></td></tr>
              <tr><td>Google</td><td>未绑定</td><td>—</td><td class="table-actions"><button class="btn link" onclick="bind('Google')">绑定</button></td></tr>
              <tr><td>GitHub</td><td>已绑定</td><td>2025-09-12</td><td class="table-actions"><button class="btn link" onclick="unbind('GitHub')">解绑</button></td></tr>
            </tbody>
          </table>
          <div class="row single" style="margin-top:12px">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
              <div><div class="section-title" style="margin:0 0 4px">两步验证（2FA）</div><div class="muted">短信或验证器应用</div></div>
              <label class="switch"><input id="twofa" type="checkbox"><span class="slider"></span></label>
            </div>
          </div>
        </div>
      </section>

      <!-- 无障碍 -->
      <section id="accessibility" class="card">
        <div class="card-header"><div class="card-title">无障碍</div><div class="section-title">可读性与输入辅助</div></div>
        <div class="card-body">
          <div class="row">
            <div>
              <label class="section-title">字体大小</label>
              <select id="fontSize" class="select">
                <option value="base" selected>标准</option>
                <option value="lg">大</option>
                <option value="xl">超大</option>
              </select>
            </div>
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
              <div>
                <div class="section-title" style="margin:0 0 4px">高对比度</div>
                <div class="muted">强化文本与组件对比度</div>
              </div>
              <label class="switch"><input id="highContrast" type="checkbox"><span class="slider"></span></label>
            </div>
          </div>
          <div class="savebar"><button class="btn" onclick="resetA11y()">重置</button><button class="btn primary" onclick="saveA11y()">保存</button></div>
        </div>
      </section>

      <!-- 地区与语言 -->
      <section id="regional" class="card">
        <div class="card-header"><div class="card-title">地区与语言</div><div class="section-title">区域、时区、货币</div></div>
        <div class="card-body">
          <div class="row">
            <div>
              <label class="section-title">语言</label>
              <select id="lang" class="select">
                <option value="zh" selected>简体中文</option>
                <option value="en">English</option>
              </select>
            </div>
            <div>
              <label class="section-title">地区/时区</label>
              <input class="input" id="tz" value="Canada / America/Toronto" />
            </div>
          </div>
          <div class="row" style="margin-top:12px">
            <div>
              <label class="section-title">默认货币</label>
              <select id="currency" class="select">
                <option value="CAD" selected>CAD</option>
                <option value="USD">USD</option>
                <option value="CNY">CNY</option>
              </select>
            </div>
            <div>
              <label class="section-title">日期格式</label>
              <select id="dateFmt" class="select">
                <option value="YMD" selected>YYYY-MM-DD</option>
                <option value="DMY">DD/MM/YYYY</option>
                <option value="MDY">MM/DD/YYYY</option>
              </select>
            </div>
          </div>
          <div class="savebar"><button class="btn" onclick="resetRegional()">重置</button><button class="btn primary" onclick="saveRegional()">保存</button></div>
        </div>
      </section>

      <!-- 外部账号/集成 -->
      <section id="connections" class="card">
        <div class="card-header"><div class="card-title">外部账号/集成</div><div class="section-title">第三方绑定</div></div>
        <div class="card-body">
          <table>
            <thead><tr><th>服务</th><th>状态</th><th>说明</th><th>操作</th></tr></thead>
            <tbody>
              <tr><td>Google</td><td>未绑定</td><td>用于快速登录/同步日历</td><td class="table-actions"><button class="btn link" onclick="bind('Google')">绑定</button></td></tr>
              <tr><td>GitHub</td><td>已绑定</td><td>用于导入作品仓库</td><td class="table-actions"><button class="btn link" onclick="unbind('GitHub')">解绑</button></td></tr>
              <tr><td>Stripe</td><td>未绑定</td><td>用于收款与结算</td><td class="table-actions"><button class="btn link" onclick="bind('Stripe')">绑定</button></td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 开发者选项 -->
      <section id="developer" class="card">
        <div class="card-header"><div class="card-title">开发者选项</div><div class="section-title">API 与日志</div></div>
        <div class="card-body">
          <div class="row">
            <div>
              <label class="section-title">API Key（占位）</label>
              <input class="input" placeholder="sk-..." />
            </div>
            <div>
              <label class="section-title">SDK 日志级别</label>
              <select class="select">
                <option>INFO</option><option selected>WARN</option><option>ERROR</option>
              </select>
            </div>
          </div>
          <div class="row single" style="margin-top:12px">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
              <div><div class="section-title" style="margin:0 0 4px">启用调试面板</div><div class="muted">仅在本设备显示</div></div>
              <label class="switch"><input id="debugPanel" type="checkbox"><span class="slider"></span></label>
            </div>
          </div>
          <div class="savebar"><button class="btn" onclick="toast('已恢复默认')">重置</button><button class="btn primary" onclick="toast('开发者设置已保存')">保存</button></div>
        </div>
      </section>

      <!-- 数据导出与删除 -->
      <section id="data" class="card">
        <div class="card-header"><div class="card-title">数据导出与删除</div><div class="section-title">合规工具</div></div>
        <div class="card-body">
          <div class="row single">
            <button class="btn" onclick="toast('已开始准备导出（DEMO）')">导出我的数据（JSON/ZIP）</button>
            <button class="btn" onclick="toast('已提交删除请求（DEMO）','error')">请求删除我的数据</button>
          </div>
        </div>
      </section>

      <!-- 会话与设备 -->
      <section id="sessions" class="card">
        <div class="card-header"><div class="card-title">会话与设备</div><div class="section-title">登录设备管理</div></div>
        <div class="card-body">
          <table>
            <thead><tr><th>设备</th><th>位置</th><th>最近活动</th><th>操作</th></tr></thead>
            <tbody>
              <tr><td>Chrome · Windows</td><td>Toronto, CA</td><td>今天 10:15</td><td class="table-actions"><button class="btn link" onclick="toast('已退出此设备')">退出</button></td></tr>
              <tr><td>Safari · iOS</td><td>Mississauga, CA</td><td>2025-09-12</td><td class="table-actions"><button class="btn link" onclick="toast('已退出此设备')">退出</button></td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 危险操作 -->
      <section id="danger" class="card danger">
        <div class="card-header"><div class="card-title">危险操作</div><div class="section-title">不可逆，请谨慎</div></div>
        <div class="card-body">
          <div class="row single"><div class="muted">重置所有设置为默认并清空本地会话。</div></div>
          <div class="savebar">
            <button class="btn danger" onclick="if(confirm('确定要重置所有设置？')){ toast('已重置（DEMO）','error') }">重置所有设置</button>
          </div>
        </div>
      </section>
    </section>
  </main>

  <script>
    // —— 侧栏高亮与锚点滚动 ——
    const sideLinks = document.querySelectorAll('.side a');
    sideLinks.forEach(a=>a.addEventListener('click', e=>{
      sideLinks.forEach(x=>x.classList.remove('active'));
      e.target.classList.add('active');
    }));

    // —— 通用设置 ——
    const generalDefaults = {theme:'dark', homeTab:'dashboard', labs:false, reducedMotion:false};
    function resetGeneral(){
      document.getElementById('theme').value = generalDefaults.theme;
      document.getElementById('homeTab').value = generalDefaults.homeTab;
      document.getElementById('labs').checked = generalDefaults.labs;
      document.getElementById('reducedMotion').checked = generalDefaults.reducedMotion;
      toast('已重置通用设置');
    }
    function saveGeneral(){ toast('通用设置已保存'); }

    // —— 隐私 ——
    const privacyDefaults = {profilePublic:false, onlineStatus:'hide', indexing:'deny'};
    function resetPrivacy(){
      document.getElementById('profilePublic').checked = privacyDefaults.profilePublic;
      document.getElementById('onlineStatus').value = privacyDefaults.onlineStatus;
      document.getElementById('indexing').value = privacyDefaults.indexing;
      toast('已重置隐私设置');
    }
    function savePrivacy(){ toast('隐私设置已保存'); }

    // —— 通知 ——
    const nDefaults = {nChannel:'inapp', nFreq:'realtime'};
    function resetNotify(){
      document.getElementById('nChannel').value = nDefaults.nChannel;
      document.getElementById('nFreq').value = nDefaults.nFreq;
      toast('已重置通知设置');
    }
    function saveNotify(){ toast('通知设置已保存'); }

    // —— 无障碍 ——
    const a11yDefaults = {fontSize:'base', highContrast:false};
    function resetA11y(){
      document.getElementById('fontSize').value = a11yDefaults.fontSize;
      document.getElementById('highContrast').checked = a11yDefaults.highContrast;
      toast('已重置无障碍设置');
    }
    function saveA11y(){ toast('无障碍设置已保存'); }

    // —— 地区与语言 ——
    const regionalDefaults = {lang:'zh', tz:'Canada / America/Toronto', currency:'CAD', dateFmt:'YMD'};
    function resetRegional(){
      document.getElementById('lang').value = regionalDefaults.lang;
      document.getElementById('tz').value = regionalDefaults.tz;
      document.getElementById('currency').value = regionalDefaults.currency;
      document.getElementById('dateFmt').value = regionalDefaults.dateFmt;
      toast('已重置地区与语言');
    }
    function saveRegional(){ toast('地区与语言设置已保存'); }

    // —— 安全/绑定 ——
    function changePwd(){ const p = prompt('输入新密码（DEMO）：'); if(p && p.length>=8) toast('密码已更新'); else if(p) toast('密码至少 8 位','error'); }
    function bind(name){ toast(`已绑定 ${name}`); }
    function unbind(name){ if(confirm(`确定解绑 ${name} 吗？`)) toast(`已解绑 ${name}`); }

    // —— 通知组件 ——
    function toast(msg,type='success'){
      const el = document.createElement('div'); el.textContent=msg; el.className='toast';
      el.style.position='fixed'; el.style.top='20px'; el.style.right='20px'; el.style.zIndex=10000;
      el.style.padding='12px 16px'; el.style.borderRadius='10px'; el.style.color='#fff'; el.style.fontWeight='700';
      el.style.background = type==='error'?'linear-gradient(45deg,#f44336,#d32f2f)':'linear-gradient(45deg,#4CAF50,#45a049)';
      el.style.boxShadow='0 5px 20px rgba(0,0,0,.3)'; el.style.transform='translateX(400px)'; el.style.transition='transform .3s ease';
      document.body.appendChild(el); requestAnimationFrame(()=>{ el.style.transform='translateX(0)'; });
      setTimeout(()=>{ el.style.transform='translateX(400px)'; setTimeout(()=> el.remove(), 300); }, 2200);
    }
  </script>
</body>
</html>